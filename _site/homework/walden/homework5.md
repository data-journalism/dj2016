{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "import urllib2#调用urllib2  \n",
    "from bs4 import BeautifulSoup\n",
    "import os"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "# set work directory \n",
    "# 注意请调整以下路径名为你想要的路径\n",
    "os.chdir('/Users/dell/walden101/')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "url='http://jc.nju.edu.cn'\n",
    "html=urllib2.urlopen(url).read()\n",
    "#print html"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "soup = BeautifulSoup(html)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "ename": "NameError",
     "evalue": "name 'soup' is not defined",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)",
      "\u001b[0;32m<ipython-input-2-7625674e2b80>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[0;32m----> 1\u001b[0;31m \u001b[1;32mprint\u001b[0m \u001b[0msoup\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mtitle\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mtext\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m: name 'soup' is not defined"
     ]
    }
   ],
   "source": [
    "print soup.title.text"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "def crawler(page_num, file_name):\n",
    "    try:\n",
    "        # open the browser\n",
    "        url = \"http://bbs.tianya.cn/list.jsp?item=free&nextid=%d&order=8&k=雾霾\" % page_num\n",
    "        content = urllib2.urlopen(url).read() #获取网页的html文本\n",
    "        soup = BeautifulSoup(content) \n",
    "        articles = soup.find_all('tr')\n",
    "        # write down info\n",
    "        for i in articles[1:]:\n",
    "            td = i.find_all('td')\n",
    "            title = td[0].text.strip()\n",
    "            title_url = td[0].a['href']\n",
    "            author = td[1].text\n",
    "            author_url = td[1].a['href']\n",
    "            views = td[2].text\n",
    "            replies = td[3].text\n",
    "            date = td[4]['title']\n",
    "            record = title + '\\t' + title_url+ '\\t' + author + '\\t'+ author_url + '\\t' + views+ '\\t'  + replies+ '\\t'+ date\n",
    "            with open(file_name,'a') as p: # '''Note'''：Ａppend mode, run only once!\n",
    "                        p.write(record.encode('utf-8')+\"\\n\") ##!!encode here to utf-8 to avoid encoding\n",
    "\n",
    "    except:\n",
    "        pass"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "0\n"
     ]
    },
    {
     "ename": "NameError",
     "evalue": "name 'crawler' is not defined",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m                                 Traceback (most recent call last)",
      "\u001b[0;32m<ipython-input-3-325b340ae875>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      1\u001b[0m \u001b[1;32mfor\u001b[0m \u001b[0mpage_num\u001b[0m \u001b[1;32min\u001b[0m \u001b[0mrange\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;36m0\u001b[0m\u001b[1;33m,\u001b[0m\u001b[1;36m3\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m      2\u001b[0m     \u001b[1;32mprint\u001b[0m \u001b[1;33m(\u001b[0m\u001b[0mpage_num\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m----> 3\u001b[0;31m     \u001b[0mcrawler\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mpage_num\u001b[0m\u001b[1;33m,\u001b[0m \u001b[1;34m'wumai_first_4_pages.txt'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m",
      "\u001b[0;31mNameError\u001b[0m: name 'crawler' is not defined"
     ]
    }
   ],
   "source": [
    "for page_num in range(0,3):\n",
    "    print (page_num)\n",
    "    crawler(page_num, 'wumai_first_4_pages.txt') "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<iframe src=http://datacenter.mep.gov.cn/report/air_daily/air_dairy.jsp?page=1 width=1000 height=500></iframe>"
      ],
      "text/plain": [
       "<IPython.core.display.HTML object>"
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from IPython.display import HTML\n",
    "HTML('<iframe src=http://datacenter.mep.gov.cn/report/air_daily/air_dairy.jsp?page=1 width=1000 height=500></iframe>')\n",
    "# the webpage we would like to crawl"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "url = \"http://datacenter.mep.gov.cn/report/air_daily/air_dairy.jsp?page=1\"\n",
    "content = urllib2.urlopen(url).read() #获取网页的html文本\n",
    "soup = BeautifulSoup(content, \"lxml\") \n",
    "table = soup.find(\"table\", { \"id\" : \"report1\" })"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<table cellpadding=\"0\" cellspacing=\"0\" id=\"report1\" onmouseout=\"report1501034out()\" style=\"width:933px;table-layout:fixed;border-collapse:collapse\">\n",
      "<colgroup>\n",
      "<col style=\"width:1px;\"></col>\n",
      "<col style=\"width:96px;\"></col>\n",
      "<col style=\"width:175px;\"></col>\n",
      "<col style=\"width:195px;\"></col>\n",
      "<col style=\"width:158px;\"></col>\n",
      "<col style=\"width:148px;\"></col>\n",
      "<col style=\"width:160px;\"></col>\n",
      "</colgroup>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_7\"></td>\n",
      "<td class=\"report1_15\"></td>\n",
      "<td class=\"report1_11\" colspan=\"4\">全 国 城 市 空 气 质 量 日 报</td>\n",
      "<td class=\"report1_10\" onmouseover=\"report1501034over()\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_6\" colspan=\"2\">序号</td>\n",
      "<td class=\"report1_6\">城市</td>\n",
      "<td class=\"report1_6\">日期</td>\n",
      "<td class=\"report1_6\">AQI指数</td>\n",
      "<td class=\"report1_4\" onmouseover=\"report1501034over()\">空气质量级别</td>\n",
      "<td class=\"report1_6\">首要污染物</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">1</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">北京市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">55</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">天津市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">62</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">3</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">石家庄市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">70</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">4</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">唐山市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">64</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">5</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">秦皇岛市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">39</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">6</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">邯郸市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">52</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">7</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">邢台市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">45</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">8</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">保定市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">67</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">9</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">承德市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">51</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">10</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">沧州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">73</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">11</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">廊坊市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">68</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">12</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">衡水市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">63</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">13</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">张家口市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">56</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">14</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">太原市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">50</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">15</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">大同市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">47</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">16</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">阳泉市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">17</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">长治市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">35</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">18</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">晋城市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">43</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">19</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">朔州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">46</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">20</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">晋中市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">33</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">21</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">运城市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">22</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">忻州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">40</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">临汾市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">50</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">24</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">吕梁市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">25</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">呼和浩特市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">63</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2,PM10</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">26</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">包头市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">67</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">27</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">乌海市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">66</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">28</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">赤峰市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">65</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">29</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">通辽市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">74</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">30</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">鄂尔多斯市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">44</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "<tr height=\"25\" style=\"height:25px;\">\n",
      "<td class=\"report1_13\" colspan=\"3\" onmouseover=\"report1501034over()\">记录总数：<b><font color=\"#004e98\">367</font></b>　　总页数：<b><font color=\"#004e98\">13</font></b></td>\n",
      "<td class=\"report1_5\" onmouseover=\"report1501034over()\">每页记录数：<b><font color=\"#004e98\">30</font></b></td>\n",
      "<td class=\"report1_14\" style=\"padding-right:4px;\">首页 上一页</td>\n",
      "<td class=\"report1_5\"><a href=\"javascript: jumpTo(2)\">下一页</a> <a href=\"javascript: jumpTo(13)\">末页</a></td>\n",
      "<td class=\"report1_14\"><input name=\"pageNum\" size=\"5\" type=\"text\" value=\"1\"/> <input onclick=\"jump('13');\" type=\"button\" value=\"跳转\"/></td>\n",
      "</tr>\n",
      "<tr height=\"25\" style=\"height:25px;\">\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_14\"><a href=\"#\" onclick=\"forwardToMain();\"><img border=\"no\" src=\"../images/button/forwardIndex.gif\"/></a></td>\n",
      "</tr>\n",
      "<tr height=\"300\" style=\"height:300px;\">\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_1\" colspan=\"6\" onmouseover=\"report1501034over()\"><img border=\"no\" height=\"300\" ismap=\"\" src=\"http://datacenter.mep.gov.cn:80/report/reportServlet?action=9&amp;graphId=147686&amp;time=1477276377777\" usemap=\"#147686\" width=\"932\"/><map name=\"147686\"><area coords=\"68,95,78,216\" shape=\"rect\" title=\"北京市 AQI指数 55\"></area>\n",
      "<area coords=\"96,79,106,216\" shape=\"rect\" title=\"天津市 AQI指数 62\"></area>\n",
      "<area coords=\"124,61,134,216\" shape=\"rect\" title=\"石家庄市 AQI指数 70\"></area>\n",
      "<area coords=\"152,75,162,216\" shape=\"rect\" title=\"唐山市 AQI指数 64\"></area>\n",
      "<area coords=\"180,130,190,216\" shape=\"rect\" title=\"秦皇岛市 AQI指数 39\"></area>\n",
      "<area coords=\"209,101,219,216\" shape=\"rect\" title=\"邯郸市 AQI指数 52\"></area>\n",
      "<area coords=\"237,117,247,216\" shape=\"rect\" title=\"邢台市 AQI指数 45\"></area>\n",
      "<area coords=\"265,68,275,216\" shape=\"rect\" title=\"保定市 AQI指数 67\"></area>\n",
      "<area coords=\"293,104,303,216\" shape=\"rect\" title=\"承德市 AQI指数 51\"></area>\n",
      "<area coords=\"321,55,331,216\" shape=\"rect\" title=\"沧州市 AQI指数 73\"></area>\n",
      "<area coords=\"349,66,359,216\" shape=\"rect\" title=\"廊坊市 AQI指数 68\"></area>\n",
      "<area coords=\"377,77,387,216\" shape=\"rect\" title=\"衡水市 AQI指数 63\"></area>\n",
      "<area coords=\"405,92,415,216\" shape=\"rect\" title=\"张家口市 AQI指数 56\"></area>\n",
      "<area coords=\"434,106,444,216\" shape=\"rect\" title=\"太原市 AQI指数 50\"></area>\n",
      "<area coords=\"462,112,472,216\" shape=\"rect\" title=\"大同市 AQI指数 47\"></area>\n",
      "<area coords=\"490,132,500,216\" shape=\"rect\" title=\"阳泉市 AQI指数 38\"></area>\n",
      "<area coords=\"518,139,528,216\" shape=\"rect\" title=\"长治市 AQI指数 35\"></area>\n",
      "<area coords=\"546,121,556,216\" shape=\"rect\" title=\"晋城市 AQI指数 43\"></area>\n",
      "<area coords=\"574,115,584,216\" shape=\"rect\" title=\"朔州市 AQI指数 46\"></area>\n",
      "<area coords=\"602,143,612,216\" shape=\"rect\" title=\"晋中市 AQI指数 33\"></area>\n",
      "<area coords=\"630,132,640,216\" shape=\"rect\" title=\"运城市 AQI指数 38\"></area>\n",
      "<area coords=\"659,128,669,216\" shape=\"rect\" title=\"忻州市 AQI指数 40\"></area>\n",
      "<area coords=\"687,106,697,216\" shape=\"rect\" title=\"临汾市 AQI指数 50\"></area>\n",
      "<area coords=\"715,132,725,216\" shape=\"rect\" title=\"吕梁市 AQI指数 38\"></area>\n",
      "<area coords=\"743,77,753,216\" shape=\"rect\" title=\"呼和浩特市 AQI指数 63\"></area>\n",
      "<area coords=\"771,68,781,216\" shape=\"rect\" title=\"包头市 AQI指数 67\"></area>\n",
      "<area coords=\"799,70,809,216\" shape=\"rect\" title=\"乌海市 AQI指数 66\"></area>\n",
      "<area coords=\"827,73,837,216\" shape=\"rect\" title=\"赤峰市 AQI指数 65\"></area>\n",
      "<area coords=\"855,53,865,216\" shape=\"rect\" title=\"通辽市 AQI指数 74\"></area>\n",
      "<area coords=\"884,119,894,216\" shape=\"rect\" title=\"鄂尔多斯市 AQI指数 44\"></area>\n",
      "</map></td>\n",
      "</tr>\n",
      "</table>\n"
     ]
    }
   ],
   "source": [
    "print table"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_7\"></td>\n",
      "<td class=\"report1_15\"></td>\n",
      "<td class=\"report1_11\" colspan=\"4\">全 国 城 市 空 气 质 量 日 报</td>\n",
      "<td class=\"report1_10\" onmouseover=\"report1501034over()\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_6\" colspan=\"2\">序号</td>\n",
      "<td class=\"report1_6\">城市</td>\n",
      "<td class=\"report1_6\">日期</td>\n",
      "<td class=\"report1_6\">AQI指数</td>\n",
      "<td class=\"report1_4\" onmouseover=\"report1501034over()\">空气质量级别</td>\n",
      "<td class=\"report1_6\">首要污染物</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">1</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">北京市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">55</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">天津市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">62</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">3</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">石家庄市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">70</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">4</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">唐山市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">64</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">5</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">秦皇岛市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">39</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">6</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">邯郸市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">52</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">7</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">邢台市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">45</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">8</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">保定市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">67</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">9</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">承德市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">51</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">10</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">沧州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">73</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">11</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">廊坊市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">68</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">12</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">衡水市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">63</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">NO2</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">13</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">张家口市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">56</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">14</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">太原市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">50</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">15</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">大同市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">47</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">16</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">阳泉市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">17</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">长治市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">35</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">18</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">晋城市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">43</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">19</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">朔州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">46</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">20</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">晋中市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">33</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">21</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">运城市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">22</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">忻州市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">40</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">临汾市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">50</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">24</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">吕梁市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">38</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">25</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">呼和浩特市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">63</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">NO2,PM10</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">26</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">包头市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">67</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">27</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">乌海市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">66</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00A7D1;\">28</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">赤峰市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">65</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">PM10</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">29</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">通辽市</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">74</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00A7D1;\">良</td>\n",
      "<td class=\"report1_12\" style=\"color:#00A7D1;\">PM2.5</td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"30\" style=\"height:30px;\">\n",
      "<td class=\"report1_12\" colspan=\"2\" style=\"color:#00FF00;\">30</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">鄂尔多斯市</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">2016-10-23</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\">44</td>\n",
      "<td class=\"report1_12\" style=\"color:#00FF00;\">优</td>\n",
      "<td class=\"report1_12\" onmouseover=\"report1501034over()\" style=\"color:#00FF00;\"></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"25\" style=\"height:25px;\">\n",
      "<td class=\"report1_13\" colspan=\"3\" onmouseover=\"report1501034over()\">记录总数：<b><font color=\"#004e98\">367</font></b>　　总页数：<b><font color=\"#004e98\">13</font></b></td>\n",
      "<td class=\"report1_5\" onmouseover=\"report1501034over()\">每页记录数：<b><font color=\"#004e98\">30</font></b></td>\n",
      "<td class=\"report1_14\" style=\"padding-right:4px;\">首页 上一页</td>\n",
      "<td class=\"report1_5\"><a href=\"javascript: jumpTo(2)\">下一页</a> <a href=\"javascript: jumpTo(13)\">末页</a></td>\n",
      "<td class=\"report1_14\"><input name=\"pageNum\" size=\"5\" type=\"text\" value=\"1\"/> <input onclick=\"jump('13');\" type=\"button\" value=\"跳转\"/></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"25\" style=\"height:25px;\">\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_2\"></td>\n",
      "<td class=\"report1_14\"><a href=\"#\" onclick=\"forwardToMain();\"><img border=\"no\" src=\"../images/button/forwardIndex.gif\"/></a></td>\n",
      "</tr>\n",
      "------\n",
      "<tr height=\"300\" style=\"height:300px;\">\n",
      "<td class=\"report1_2\" onmouseover=\"report1501034over()\"></td>\n",
      "<td class=\"report1_1\" colspan=\"6\" onmouseover=\"report1501034over()\"><img border=\"no\" height=\"300\" ismap=\"\" src=\"http://datacenter.mep.gov.cn:80/report/reportServlet?action=9&amp;graphId=147686&amp;time=1477276377777\" usemap=\"#147686\" width=\"932\"/><map name=\"147686\"><area coords=\"68,95,78,216\" shape=\"rect\" title=\"北京市 AQI指数 55\"></area>\n",
      "<area coords=\"96,79,106,216\" shape=\"rect\" title=\"天津市 AQI指数 62\"></area>\n",
      "<area coords=\"124,61,134,216\" shape=\"rect\" title=\"石家庄市 AQI指数 70\"></area>\n",
      "<area coords=\"152,75,162,216\" shape=\"rect\" title=\"唐山市 AQI指数 64\"></area>\n",
      "<area coords=\"180,130,190,216\" shape=\"rect\" title=\"秦皇岛市 AQI指数 39\"></area>\n",
      "<area coords=\"209,101,219,216\" shape=\"rect\" title=\"邯郸市 AQI指数 52\"></area>\n",
      "<area coords=\"237,117,247,216\" shape=\"rect\" title=\"邢台市 AQI指数 45\"></area>\n",
      "<area coords=\"265,68,275,216\" shape=\"rect\" title=\"保定市 AQI指数 67\"></area>\n",
      "<area coords=\"293,104,303,216\" shape=\"rect\" title=\"承德市 AQI指数 51\"></area>\n",
      "<area coords=\"321,55,331,216\" shape=\"rect\" title=\"沧州市 AQI指数 73\"></area>\n",
      "<area coords=\"349,66,359,216\" shape=\"rect\" title=\"廊坊市 AQI指数 68\"></area>\n",
      "<area coords=\"377,77,387,216\" shape=\"rect\" title=\"衡水市 AQI指数 63\"></area>\n",
      "<area coords=\"405,92,415,216\" shape=\"rect\" title=\"张家口市 AQI指数 56\"></area>\n",
      "<area coords=\"434,106,444,216\" shape=\"rect\" title=\"太原市 AQI指数 50\"></area>\n",
      "<area coords=\"462,112,472,216\" shape=\"rect\" title=\"大同市 AQI指数 47\"></area>\n",
      "<area coords=\"490,132,500,216\" shape=\"rect\" title=\"阳泉市 AQI指数 38\"></area>\n",
      "<area coords=\"518,139,528,216\" shape=\"rect\" title=\"长治市 AQI指数 35\"></area>\n",
      "<area coords=\"546,121,556,216\" shape=\"rect\" title=\"晋城市 AQI指数 43\"></area>\n",
      "<area coords=\"574,115,584,216\" shape=\"rect\" title=\"朔州市 AQI指数 46\"></area>\n",
      "<area coords=\"602,143,612,216\" shape=\"rect\" title=\"晋中市 AQI指数 33\"></area>\n",
      "<area coords=\"630,132,640,216\" shape=\"rect\" title=\"运城市 AQI指数 38\"></area>\n",
      "<area coords=\"659,128,669,216\" shape=\"rect\" title=\"忻州市 AQI指数 40\"></area>\n",
      "<area coords=\"687,106,697,216\" shape=\"rect\" title=\"临汾市 AQI指数 50\"></area>\n",
      "<area coords=\"715,132,725,216\" shape=\"rect\" title=\"吕梁市 AQI指数 38\"></area>\n",
      "<area coords=\"743,77,753,216\" shape=\"rect\" title=\"呼和浩特市 AQI指数 63\"></area>\n",
      "<area coords=\"771,68,781,216\" shape=\"rect\" title=\"包头市 AQI指数 67\"></area>\n",
      "<area coords=\"799,70,809,216\" shape=\"rect\" title=\"乌海市 AQI指数 66\"></area>\n",
      "<area coords=\"827,73,837,216\" shape=\"rect\" title=\"赤峰市 AQI指数 65\"></area>\n",
      "<area coords=\"855,53,865,216\" shape=\"rect\" title=\"通辽市 AQI指数 74\"></area>\n",
      "<area coords=\"884,119,894,216\" shape=\"rect\" title=\"鄂尔多斯市 AQI指数 44\"></area>\n",
      "</map></td>\n",
      "</tr>\n",
      "------\n"
     ]
    }
   ],
   "source": [
    "for row in table.findAll(\"tr\"):\n",
    "    print row\n",
    "    print \"------\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "None \tNone \t全 国 城 市 空 气 质 量 日 报 \tNone ----\n",
      "\n",
      "序号 \t城市 \t日期 \tAQI指数 ----\n",
      "\n",
      "1 \t北京市 \t2016-10-23 \t55 ----\n",
      "\n",
      "2 \t天津市 \t2016-10-23 \t62 ----\n",
      "\n",
      "3 \t石家庄市 \t2016-10-23 \t70 ----\n",
      "\n",
      "4 \t唐山市 \t2016-10-23 \t64 ----\n",
      "\n",
      "5 \t秦皇岛市 \t2016-10-23 \t39 ----\n",
      "\n",
      "6 \t邯郸市 \t2016-10-23 \t52 ----\n",
      "\n",
      "7 \t邢台市 \t2016-10-23 \t45 ----\n",
      "\n",
      "8 \t保定市 \t2016-10-23 \t67 ----\n",
      "\n",
      "9 \t承德市 \t2016-10-23 \t51 ----\n",
      "\n",
      "10 \t沧州市 \t2016-10-23 \t73 ----\n",
      "\n",
      "11 \t廊坊市 \t2016-10-23 \t68 ----\n",
      "\n",
      "12 \t衡水市 \t2016-10-23 \t63 ----\n",
      "\n",
      "13 \t张家口市 \t2016-10-23 \t56 ----\n",
      "\n",
      "14 \t太原市 \t2016-10-23 \t50 ----\n",
      "\n",
      "15 \t大同市 \t2016-10-23 \t47 ----\n",
      "\n",
      "16 \t阳泉市 \t2016-10-23 \t38 ----\n",
      "\n",
      "17 \t长治市 \t2016-10-23 \t35 ----\n",
      "\n",
      "18 \t晋城市 \t2016-10-23 \t43 ----\n",
      "\n",
      "19 \t朔州市 \t2016-10-23 \t46 ----\n",
      "\n",
      "20 \t晋中市 \t2016-10-23 \t33 ----\n",
      "\n",
      "21 \t运城市 \t2016-10-23 \t38 ----\n",
      "\n",
      "22 \t忻州市 \t2016-10-23 \t40 ----\n",
      "\n",
      "23 \t临汾市 \t2016-10-23 \t50 ----\n",
      "\n",
      "24 \t吕梁市 \t2016-10-23 \t38 ----\n",
      "\n",
      "25 \t呼和浩特市 \t2016-10-23 \t63 ----\n",
      "\n",
      "26 \t包头市 \t2016-10-23 \t67 ----\n",
      "\n",
      "27 \t乌海市 \t2016-10-23 \t66 ----\n",
      "\n",
      "28 \t赤峰市 \t2016-10-23 \t65 ----\n",
      "\n",
      "29 \t通辽市 \t2016-10-23 \t74 ----\n",
      "\n",
      "30 \t鄂尔多斯市 \t2016-10-23 \t44 ----\n",
      "\n",
      "记录总数： \t每页记录数： \t首页 上一页 \t下一页 ----\n",
      "\n",
      "None \tNone \tNone \tNone ----\n",
      "\n"
     ]
    },
    {
     "ename": "IndexError",
     "evalue": "list index out of range",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mIndexError\u001b[0m                                Traceback (most recent call last)",
      "\u001b[0;32m<ipython-input-9-ccc186319708>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m      3\u001b[0m     \u001b[0mrowNumber\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mcells\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;36m0\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mtext\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mTrue\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m      4\u001b[0m     \u001b[0mcityName\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mcells\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;36m1\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mtext\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mTrue\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m----> 5\u001b[0;31m     \u001b[0mdate\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mcells\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;36m2\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mtext\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mTrue\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m      6\u001b[0m     \u001b[0mAQI\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mcells\u001b[0m\u001b[1;33m[\u001b[0m\u001b[1;36m3\u001b[0m\u001b[1;33m]\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mfind\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mtext\u001b[0m \u001b[1;33m=\u001b[0m \u001b[0mTrue\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m      7\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[0;31mIndexError\u001b[0m: list index out of range"
     ]
    }
   ],
   "source": [
    "for row in table.findAll(\"tr\"):\n",
    "    cells = row.findAll(\"td\")\n",
    "    rowNumber = cells[0].find(text = True)\n",
    "    cityName = cells[1].find(text = True)\n",
    "    date = cells[2].find(text = True)\n",
    "    AQI = cells[3].find(text = True)\n",
    "    \n",
    "    print rowNumber,'\\t', cityName,'\\t', date, '\\t', AQI, '----\\n'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "1 \t北京市 \t2016-10-23 \t55 ----\n",
      "\n",
      "2 \t天津市 \t2016-10-23 \t62 ----\n",
      "\n",
      "3 \t石家庄市 \t2016-10-23 \t70 ----\n",
      "\n",
      "4 \t唐山市 \t2016-10-23 \t64 ----\n",
      "\n",
      "5 \t秦皇岛市 \t2016-10-23 \t39 ----\n",
      "\n",
      "6 \t邯郸市 \t2016-10-23 \t52 ----\n",
      "\n",
      "7 \t邢台市 \t2016-10-23 \t45 ----\n",
      "\n",
      "8 \t保定市 \t2016-10-23 \t67 ----\n",
      "\n",
      "9 \t承德市 \t2016-10-23 \t51 ----\n",
      "\n",
      "10 \t沧州市 \t2016-10-23 \t73 ----\n",
      "\n",
      "11 \t廊坊市 \t2016-10-23 \t68 ----\n",
      "\n",
      "12 \t衡水市 \t2016-10-23 \t63 ----\n",
      "\n",
      "13 \t张家口市 \t2016-10-23 \t56 ----\n",
      "\n",
      "14 \t太原市 \t2016-10-23 \t50 ----\n",
      "\n",
      "15 \t大同市 \t2016-10-23 \t47 ----\n",
      "\n",
      "16 \t阳泉市 \t2016-10-23 \t38 ----\n",
      "\n",
      "17 \t长治市 \t2016-10-23 \t35 ----\n",
      "\n",
      "18 \t晋城市 \t2016-10-23 \t43 ----\n",
      "\n",
      "19 \t朔州市 \t2016-10-23 \t46 ----\n",
      "\n",
      "20 \t晋中市 \t2016-10-23 \t33 ----\n",
      "\n",
      "21 \t运城市 \t2016-10-23 \t38 ----\n",
      "\n",
      "22 \t忻州市 \t2016-10-23 \t40 ----\n",
      "\n",
      "23 \t临汾市 \t2016-10-23 \t50 ----\n",
      "\n",
      "24 \t吕梁市 \t2016-10-23 \t38 ----\n",
      "\n",
      "25 \t呼和浩特市 \t2016-10-23 \t63 ----\n",
      "\n",
      "26 \t包头市 \t2016-10-23 \t67 ----\n",
      "\n",
      "27 \t乌海市 \t2016-10-23 \t66 ----\n",
      "\n",
      "28 \t赤峰市 \t2016-10-23 \t65 ----\n",
      "\n",
      "29 \t通辽市 \t2016-10-23 \t74 ----\n",
      "\n",
      "30 \t鄂尔多斯市 \t2016-10-23 \t44 ----\n",
      "\n"
     ]
    }
   ],
   "source": [
    "for row in table.findAll(\"tr\"):\n",
    "    cells = row.findAll(\"td\")\n",
    "    rowNumber = cells[0].find(text = True)\n",
    "    if rowNumber != None and rowNumber.isdigit():\n",
    "        cityName = cells[1].find(text = True)\n",
    "        date = cells[2].find(text = True)\n",
    "        AQI = cells[3].find(text = True)\n",
    "\n",
    "        print rowNumber,'\\t', cityName,'\\t', date, '\\t', AQI, '----\\n'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": [
    "urlBase = \"http://datacenter.mep.gov.cn/report/air_daily/air_dairy.jsp?page=\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "1 , 北京市 , 2016-10-23 , 55 \n",
      "\n",
      "2 , 天津市 , 2016-10-23 , 62 \n",
      "\n",
      "3 , 石家庄市 , 2016-10-23 , 70 \n",
      "\n",
      "4 , 唐山市 , 2016-10-23 , 64 \n",
      "\n",
      "5 , 秦皇岛市 , 2016-10-23 , 39 \n",
      "\n",
      "6 , 邯郸市 , 2016-10-23 , 52 \n",
      "\n",
      "7 , 邢台市 , 2016-10-23 , 45 \n",
      "\n",
      "8 , 保定市 , 2016-10-23 , 67 \n",
      "\n",
      "9 , 承德市 , 2016-10-23 , 51 \n",
      "\n",
      "10 , 沧州市 , 2016-10-23 , 73 \n",
      "\n",
      "11 , 廊坊市 , 2016-10-23 , 68 \n",
      "\n",
      "12 , 衡水市 , 2016-10-23 , 63 \n",
      "\n",
      "13 , 张家口市 , 2016-10-23 , 56 \n",
      "\n",
      "14 , 太原市 , 2016-10-23 , 50 \n",
      "\n",
      "15 , 大同市 , 2016-10-23 , 47 \n",
      "\n",
      "16 , 阳泉市 , 2016-10-23 , 38 \n",
      "\n",
      "17 , 长治市 , 2016-10-23 , 35 \n",
      "\n",
      "18 , 晋城市 , 2016-10-23 , 43 \n",
      "\n",
      "19 , 朔州市 , 2016-10-23 , 46 \n",
      "\n",
      "20 , 晋中市 , 2016-10-23 , 33 \n",
      "\n",
      "21 , 运城市 , 2016-10-23 , 38 \n",
      "\n",
      "22 , 忻州市 , 2016-10-23 , 40 \n",
      "\n",
      "23 , 临汾市 , 2016-10-23 , 50 \n",
      "\n",
      "24 , 吕梁市 , 2016-10-23 , 38 \n",
      "\n",
      "25 , 呼和浩特市 , 2016-10-23 , 63 \n",
      "\n",
      "26 , 包头市 , 2016-10-23 , 67 \n",
      "\n",
      "27 , 乌海市 , 2016-10-23 , 66 \n",
      "\n",
      "28 , 赤峰市 , 2016-10-23 , 65 \n",
      "\n",
      "29 , 通辽市 , 2016-10-23 , 74 \n",
      "\n",
      "30 , 鄂尔多斯市 , 2016-10-23 , 44 \n",
      "\n",
      "31 , 呼伦贝尔市 , 2016-10-23 , 30 \n",
      "\n",
      "32 , 巴彦淖尔市 , 2016-10-23 , 94 \n",
      "\n",
      "33 , 乌兰察布市 , 2016-10-23 , 46 \n",
      "\n",
      "34 , 兴安盟 , 2016-10-23 , 42 \n",
      "\n",
      "35 , 锡林郭勒盟 , 2016-10-23 , 28 \n",
      "\n",
      "36 , 阿拉善盟 , 2016-10-23 , 67 \n",
      "\n",
      "37 , 沈阳市 , 2016-10-23 , 49 \n",
      "\n",
      "38 , 大连市 , 2016-10-23 , 55 \n",
      "\n",
      "39 , 瓦房店市 , 2016-10-23 , 78 \n",
      "\n",
      "40 , 鞍山市 , 2016-10-23 , 68 \n",
      "\n",
      "41 , 抚顺市 , 2016-10-23 , 49 \n",
      "\n",
      "42 , 本溪市 , 2016-10-23 , 54 \n",
      "\n",
      "43 , 丹东市 , 2016-10-23 , 37 \n",
      "\n",
      "44 , 锦州市 , 2016-10-23 , 52 \n",
      "\n",
      "45 , 营口市 , 2016-10-23 , 59 \n",
      "\n",
      "46 , 阜新市 , 2016-10-23 , 61 \n",
      "\n",
      "47 , 辽阳市 , 2016-10-23 , 67 \n",
      "\n",
      "48 , 盘锦市 , 2016-10-23 , 37 \n",
      "\n",
      "49 , 铁岭市 , 2016-10-23 , 52 \n",
      "\n",
      "50 , 朝阳市 , 2016-10-23 , 62 \n",
      "\n",
      "51 , 葫芦岛市 , 2016-10-23 , 56 \n",
      "\n",
      "52 , 长春市 , 2016-10-23 , 71 \n",
      "\n",
      "53 , 吉林市 , 2016-10-23 , 65 \n",
      "\n",
      "54 , 四平市 , 2016-10-23 , 70 \n",
      "\n",
      "55 , 辽源市 , 2016-10-23 , 72 \n",
      "\n",
      "56 , 通化市 , 2016-10-23 , 70 \n",
      "\n",
      "57 , 白山市 , 2016-10-23 , 55 \n",
      "\n",
      "58 , 松原市 , 2016-10-23 , 59 \n",
      "\n",
      "59 , 白城市 , 2016-10-23 , 50 \n",
      "\n",
      "60 , 延边州 , 2016-10-23 , 33 \n",
      "\n",
      "61 , 哈尔滨市 , 2016-10-23 , 59 \n",
      "\n",
      "62 , 齐齐哈尔市 , 2016-10-23 , 55 \n",
      "\n",
      "63 , 鸡西市 , 2016-10-23 , 55 \n",
      "\n",
      "64 , 鹤岗市 , 2016-10-23 , 45 \n",
      "\n",
      "65 , 双鸭山市 , 2016-10-23 , 36 \n",
      "\n",
      "66 , 大庆市 , 2016-10-23 , 39 \n",
      "\n",
      "67 , 伊春市 , 2016-10-23 , 33 \n",
      "\n",
      "68 , 佳木斯市 , 2016-10-23 , 39 \n",
      "\n",
      "69 , 七台河市 , 2016-10-23 , 62 \n",
      "\n",
      "70 , 牡丹江市 , 2016-10-23 , 52 \n",
      "\n",
      "71 , 黑河市 , 2016-10-23 , 27 \n",
      "\n",
      "72 , 绥化市 , 2016-10-23 , 48 \n",
      "\n",
      "73 , 大兴安岭地区 , 2016-10-23 , 33 \n",
      "\n",
      "74 , 上海市 , 2016-10-23 , 48 \n",
      "\n",
      "75 , 南京市 , 2016-10-23 , 33 \n",
      "\n",
      "76 , 无锡市 , 2016-10-23 , 38 \n",
      "\n",
      "77 , 江阴市 , 2016-10-23 , 32 \n",
      "\n",
      "78 , 宜兴市 , 2016-10-23 , 34 \n",
      "\n",
      "79 , 徐州市 , 2016-10-23 , 50 \n",
      "\n",
      "80 , 常州市 , 2016-10-23 , 34 \n",
      "\n",
      "81 , 溧阳市 , 2016-10-23 , 36 \n",
      "\n",
      "82 , 金坛市 , 2016-10-23 , 32 \n",
      "\n",
      "83 , 苏州市 , 2016-10-23 , 43 \n",
      "\n",
      "84 , 常熟市 , 2016-10-23 , 52 \n",
      "\n",
      "85 , 张家港市 , 2016-10-23 , 46 \n",
      "\n",
      "86 , 昆山市 , 2016-10-23 , 34 \n",
      "\n",
      "87 , 吴江市 , 2016-10-23 , 47 \n",
      "\n",
      "88 , 太仓市 , 2016-10-23 , 46 \n",
      "\n",
      "89 , 南通市 , 2016-10-23 , 43 \n",
      "\n",
      "90 , 海门市 , 2016-10-23 , 48 \n",
      "\n",
      "91 , 连云港市 , 2016-10-23 , 46 \n",
      "\n",
      "92 , 淮安市 , 2016-10-23 , 39 \n",
      "\n",
      "93 , 盐城市 , 2016-10-23 , 43 \n",
      "\n",
      "94 , 扬州市 , 2016-10-23 , 32 \n",
      "\n",
      "95 , 镇江市 , 2016-10-23 , 25 \n",
      "\n",
      "96 , 句容市 , 2016-10-23 , 38 \n",
      "\n",
      "97 , 泰州市 , 2016-10-23 , 40 \n",
      "\n",
      "98 , 宿迁市 , 2016-10-23 , 38 \n",
      "\n",
      "99 , 杭州市 , 2016-10-23 , 42 \n",
      "\n",
      "100 , 富阳市 , 2016-10-23 , 35 \n",
      "\n",
      "101 , 临安市 , 2016-10-23 , 29 \n",
      "\n",
      "102 , 宁波市 , 2016-10-23 , 43 \n",
      "\n",
      "103 , 温州市 , 2016-10-23 , 43 \n",
      "\n",
      "104 , 嘉兴市 , 2016-10-23 , 40 \n",
      "\n",
      "105 , 湖州市 , 2016-10-23 , 29 \n",
      "\n",
      "106 , 诸暨市 , 2016-10-23 , None \n",
      "\n",
      "107 , 金华市 , 2016-10-23 , 32 \n",
      "\n",
      "108 , 义乌市 , 2016-10-23 , 27 \n",
      "\n",
      "109 , 衢州市 , 2016-10-23 , 28 \n",
      "\n",
      "110 , 舟山市 , 2016-10-23 , 46 \n",
      "\n",
      "111 , 台州市 , 2016-10-23 , 29 \n",
      "\n",
      "112 , 丽水市 , 2016-10-23 , 27 \n",
      "\n",
      "113 , 绍兴市 , 2016-10-23 , 37 \n",
      "\n",
      "114 , 合肥市 , 2016-10-23 , 48 \n",
      "\n",
      "115 , 芜湖市 , 2016-10-23 , 68 \n",
      "\n",
      "116 , 蚌埠市 , 2016-10-23 , 57 \n",
      "\n",
      "117 , 淮南市 , 2016-10-23 , 53 \n",
      "\n",
      "118 , 马鞍山市 , 2016-10-23 , 49 \n",
      "\n",
      "119 , 淮北市 , 2016-10-23 , 65 \n",
      "\n",
      "120 , 铜陵市 , 2016-10-23 , 39 \n",
      "\n",
      "121 , 安庆市 , 2016-10-23 , 43 \n",
      "\n",
      "122 , 黄山市 , 2016-10-23 , 27 \n",
      "\n",
      "123 , 滁州市 , 2016-10-23 , 52 \n",
      "\n",
      "124 , 阜阳市 , 2016-10-23 , 57 \n",
      "\n",
      "125 , 宿州市 , 2016-10-23 , 53 \n",
      "\n",
      "126 , 六安市 , 2016-10-23 , 43 \n",
      "\n",
      "127 , 亳州市 , 2016-10-23 , 38 \n",
      "\n",
      "128 , 池州市 , 2016-10-23 , 39 \n",
      "\n",
      "129 , 宣城市 , 2016-10-23 , 43 \n",
      "\n",
      "130 , 福州市 , 2016-10-23 , 49 \n",
      "\n",
      "131 , 厦门市 , 2016-10-23 , 50 \n",
      "\n",
      "132 , 莆田市 , 2016-10-23 , 66 \n",
      "\n",
      "133 , 三明市 , 2016-10-23 , 34 \n",
      "\n",
      "134 , 泉州市 , 2016-10-23 , 69 \n",
      "\n",
      "135 , 漳州市 , 2016-10-23 , 55 \n",
      "\n",
      "136 , 南平市 , 2016-10-23 , 40 \n",
      "\n",
      "137 , 龙岩市 , 2016-10-23 , 43 \n",
      "\n",
      "138 , 宁德市 , 2016-10-23 , 41 \n",
      "\n",
      "139 , 南昌市 , 2016-10-23 , 35 \n",
      "\n",
      "140 , 景德镇市 , 2016-10-23 , 26 \n",
      "\n",
      "141 , 萍乡市 , 2016-10-23 , 58 \n",
      "\n",
      "142 , 九江市 , 2016-10-23 , 35 \n",
      "\n",
      "143 , 新余市 , 2016-10-23 , 36 \n",
      "\n",
      "144 , 鹰潭市 , 2016-10-23 , 25 \n",
      "\n",
      "145 , 赣州市 , 2016-10-23 , 35 \n",
      "\n",
      "146 , 吉安市 , 2016-10-23 , 40 \n",
      "\n",
      "147 , 宜春市 , 2016-10-23 , 52 \n",
      "\n",
      "148 , 抚州市 , 2016-10-23 , 31 \n",
      "\n",
      "149 , 上饶市 , 2016-10-23 , 30 \n",
      "\n",
      "150 , 济南市 , 2016-10-23 , 50 \n",
      "\n",
      "151 , 章丘市 , 2016-10-23 , 52 \n",
      "\n",
      "152 , 青岛市 , 2016-10-23 , 54 \n",
      "\n",
      "153 , 胶州市 , 2016-10-23 , 33 \n",
      "\n",
      "154 , 即墨市 , 2016-10-23 , 48 \n",
      "\n",
      "155 , 平度市 , 2016-10-23 , 40 \n",
      "\n",
      "156 , 胶南市 , 2016-10-23 , 45 \n",
      "\n",
      "157 , 莱西市 , 2016-10-23 , 44 \n",
      "\n",
      "158 , 淄博市 , 2016-10-23 , 41 \n",
      "\n",
      "159 , 枣庄市 , 2016-10-23 , 46 \n",
      "\n",
      "160 , 东营市 , 2016-10-23 , 43 \n",
      "\n",
      "161 , 烟台市 , 2016-10-23 , 39 \n",
      "\n",
      "162 , 莱州市 , 2016-10-23 , 50 \n",
      "\n",
      "163 , 蓬莱市 , 2016-10-23 , 36 \n",
      "\n",
      "164 , 招远市 , 2016-10-23 , 41 \n",
      "\n",
      "165 , 潍坊市 , 2016-10-23 , 49 \n",
      "\n",
      "166 , 寿光市 , 2016-10-23 , 37 \n",
      "\n",
      "167 , 济宁市 , 2016-10-23 , 39 \n",
      "\n",
      "168 , 泰安市 , 2016-10-23 , 43 \n",
      "\n",
      "169 , 威海市 , 2016-10-23 , 34 \n",
      "\n",
      "170 , 文登市 , 2016-10-23 , 36 \n",
      "\n",
      "171 , 荣成市 , 2016-10-23 , 33 \n",
      "\n",
      "172 , 乳山市 , 2016-10-23 , 34 \n",
      "\n",
      "173 , 日照市 , 2016-10-23 , 40 \n",
      "\n",
      "174 , 莱芜市 , 2016-10-23 , 57 \n",
      "\n",
      "175 , 临沂市 , 2016-10-23 , 36 \n",
      "\n",
      "176 , 德州市 , 2016-10-23 , 57 \n",
      "\n",
      "177 , 聊城市 , 2016-10-23 , 45 \n",
      "\n",
      "178 , 滨州市 , 2016-10-23 , 39 \n",
      "\n",
      "179 , 菏泽市 , 2016-10-23 , 44 \n",
      "\n",
      "180 , 郑州市 , 2016-10-23 , 52 \n",
      "\n",
      "181 , 开封市 , 2016-10-23 , 32 \n",
      "\n",
      "182 , 洛阳市 , 2016-10-23 , 47 \n",
      "\n",
      "183 , 平顶山市 , 2016-10-23 , 29 \n",
      "\n",
      "184 , 安阳市 , 2016-10-23 , 58 \n",
      "\n",
      "185 , 鹤壁市 , 2016-10-23 , 52 \n",
      "\n",
      "186 , 新乡市 , 2016-10-23 , 52 \n",
      "\n",
      "187 , 焦作市 , 2016-10-23 , 42 \n",
      "\n",
      "188 , 濮阳市 , 2016-10-23 , 39 \n",
      "\n",
      "189 , 许昌市 , 2016-10-23 , 37 \n",
      "\n",
      "190 , 漯河市 , 2016-10-23 , 36 \n",
      "\n",
      "191 , 三门峡市 , 2016-10-23 , 28 \n",
      "\n",
      "192 , 南阳市 , 2016-10-23 , 29 \n",
      "\n",
      "193 , 商丘市 , 2016-10-23 , 49 \n",
      "\n",
      "194 , 信阳市 , 2016-10-23 , 32 \n",
      "\n",
      "195 , 周口市 , 2016-10-23 , 25 \n",
      "\n",
      "196 , 驻马店市 , 2016-10-23 , 33 \n",
      "\n",
      "197 , 武汉市 , 2016-10-23 , 38 \n",
      "\n",
      "198 , 黄石市 , 2016-10-23 , 52 \n",
      "\n",
      "199 , 十堰市 , 2016-10-23 , 30 \n",
      "\n",
      "200 , 宜昌市 , 2016-10-23 , 32 \n",
      "\n",
      "201 , 襄阳市 , 2016-10-23 , 34 \n",
      "\n",
      "202 , 鄂州市 , 2016-10-23 , 42 \n",
      "\n",
      "203 , 荆门市 , 2016-10-23 , 25 \n",
      "\n",
      "204 , 孝感市 , 2016-10-23 , 25 \n",
      "\n",
      "205 , 荆州市 , 2016-10-23 , 34 \n",
      "\n",
      "206 , 黄冈市 , 2016-10-23 , 35 \n",
      "\n",
      "207 , 咸宁市 , 2016-10-23 , 40 \n",
      "\n",
      "208 , 随州市 , 2016-10-23 , 25 \n",
      "\n",
      "209 , 恩施州 , 2016-10-23 , 33 \n",
      "\n",
      "210 , 长沙市 , 2016-10-23 , 35 \n",
      "\n",
      "211 , 株洲市 , 2016-10-23 , 53 \n",
      "\n",
      "212 , 湘潭市 , 2016-10-23 , 34 \n",
      "\n",
      "213 , 衡阳市 , 2016-10-23 , 35 \n",
      "\n",
      "214 , 邵阳市 , 2016-10-23 , 40 \n",
      "\n",
      "215 , 岳阳市 , 2016-10-23 , 30 \n",
      "\n",
      "216 , 常德市 , 2016-10-23 , 38 \n",
      "\n",
      "217 , 张家界市 , 2016-10-23 , 50 \n",
      "\n",
      "218 , 益阳市 , 2016-10-23 , 34 \n",
      "\n",
      "219 , 郴州市 , 2016-10-23 , 39 \n",
      "\n",
      "220 , 永州市 , 2016-10-23 , 39 \n",
      "\n",
      "221 , 怀化市 , 2016-10-23 , 37 \n",
      "\n",
      "222 , 娄底市 , 2016-10-23 , 38 \n",
      "\n",
      "223 , 湘西州 , 2016-10-23 , 32 \n",
      "\n",
      "224 , 广州市 , 2016-10-23 , 70 \n",
      "\n",
      "225 , 韶关市 , 2016-10-23 , 32 \n",
      "\n",
      "226 , 深圳市 , 2016-10-23 , 45 \n",
      "\n",
      "227 , 珠海市 , 2016-10-23 , 38 \n",
      "\n",
      "228 , 汕头市 , 2016-10-23 , 49 \n",
      "\n",
      "229 , 佛山市 , 2016-10-23 , 65 \n",
      "\n",
      "230 , 江门市 , 2016-10-23 , 59 \n",
      "\n",
      "231 , 湛江市 , 2016-10-23 , 49 \n",
      "\n",
      "232 , 茂名市 , 2016-10-23 , 49 \n",
      "\n",
      "233 , 肇庆市 , 2016-10-23 , 97 \n",
      "\n",
      "234 , 惠州市 , 2016-10-23 , 47 \n",
      "\n",
      "235 , 梅州市 , 2016-10-23 , 39 \n",
      "\n",
      "236 , 汕尾市 , 2016-10-23 , 42 \n",
      "\n",
      "237 , 河源市 , 2016-10-23 , 59 \n",
      "\n",
      "238 , 阳江市 , 2016-10-23 , 45 \n",
      "\n",
      "239 , 清远市 , 2016-10-23 , 52 \n",
      "\n",
      "240 , 东莞市 , 2016-10-23 , 72 \n",
      "\n",
      "241 , 中山市 , 2016-10-23 , 43 \n",
      "\n",
      "242 , 潮州市 , 2016-10-23 , 77 \n",
      "\n",
      "243 , 揭阳市 , 2016-10-23 , 64 \n",
      "\n",
      "244 , 云浮市 , 2016-10-23 , 51 \n",
      "\n",
      "245 , 南宁市 , 2016-10-23 , 59 \n",
      "\n",
      "246 , 柳州市 , 2016-10-23 , 54 \n",
      "\n",
      "247 , 桂林市 , 2016-10-23 , 36 \n",
      "\n",
      "248 , 梧州市 , 2016-10-23 , 55 \n",
      "\n",
      "249 , 北海市 , 2016-10-23 , 61 \n",
      "\n",
      "250 , 防城港市 , 2016-10-23 , 66 \n",
      "\n",
      "251 , 钦州市 , 2016-10-23 , 73 \n",
      "\n",
      "252 , 贵港市 , 2016-10-23 , 61 \n",
      "\n",
      "253 , 玉林市 , 2016-10-23 , 62 \n",
      "\n",
      "254 , 百色市 , 2016-10-23 , 62 \n",
      "\n",
      "255 , 贺州市 , 2016-10-23 , 40 \n",
      "\n",
      "256 , 河池市 , 2016-10-23 , 55 \n",
      "\n",
      "257 , 来宾市 , 2016-10-23 , 58 \n",
      "\n",
      "258 , 崇左市 , 2016-10-23 , 54 \n",
      "\n",
      "259 , 海口市 , 2016-10-23 , 36 \n",
      "\n",
      "260 , 三亚市 , 2016-10-23 , 29 \n",
      "\n",
      "261 , 重庆市 , 2016-10-23 , 58 \n",
      "\n",
      "262 , 成都市 , 2016-10-23 , 40 \n",
      "\n",
      "263 , 自贡市 , 2016-10-23 , 67 \n",
      "\n",
      "264 , 攀枝花市 , 2016-10-23 , 67 \n",
      "\n",
      "265 , 泸州市 , 2016-10-23 , 60 \n",
      "\n",
      "266 , 德阳市 , 2016-10-23 , 21 \n",
      "\n",
      "267 , 绵阳市 , 2016-10-23 , 37 \n",
      "\n",
      "268 , 广元市 , 2016-10-23 , 33 \n",
      "\n",
      "269 , 遂宁市 , 2016-10-23 , 40 \n",
      "\n",
      "270 , 内江市 , 2016-10-23 , 40 \n",
      "\n",
      "271 , 乐山市 , 2016-10-23 , 51 \n",
      "\n",
      "272 , 南充市 , 2016-10-23 , 27 \n",
      "\n",
      "273 , 眉山市 , 2016-10-23 , 56 \n",
      "\n",
      "274 , 宜宾市 , 2016-10-23 , 59 \n",
      "\n",
      "275 , 广安市 , 2016-10-23 , 43 \n",
      "\n",
      "276 , 达州市 , 2016-10-23 , 44 \n",
      "\n",
      "277 , 雅安市 , 2016-10-23 , 52 \n",
      "\n",
      "278 , 巴中市 , 2016-10-23 , 28 \n",
      "\n",
      "279 , 资阳市 , 2016-10-23 , 38 \n",
      "\n",
      "280 , 阿坝州 , 2016-10-23 , 40 \n",
      "\n",
      "281 , 甘孜州 , 2016-10-23 , 48 \n",
      "\n",
      "282 , 凉山州 , 2016-10-23 , 52 \n",
      "\n",
      "283 , 贵阳市 , 2016-10-23 , 49 \n",
      "\n",
      "284 , 六盘水市 , 2016-10-23 , 63 \n",
      "\n",
      "285 , 遵义市 , 2016-10-23 , 52 \n",
      "\n",
      "286 , 安顺市 , 2016-10-23 , 41 \n",
      "\n",
      "287 , 铜仁地区 , 2016-10-23 , 25 \n",
      "\n",
      "288 , 黔西南州 , 2016-10-23 , 52 \n",
      "\n",
      "289 , 毕节市 , 2016-10-23 , 48 \n",
      "\n",
      "290 , 黔东南州 , 2016-10-23 , 30 \n",
      "\n",
      "291 , 黔南州 , 2016-10-23 , 41 \n",
      "\n",
      "292 , 昆明市 , 2016-10-23 , 67 \n",
      "\n",
      "293 , 曲靖市 , 2016-10-23 , 57 \n",
      "\n",
      "294 , 玉溪市 , 2016-10-23 , 58 \n",
      "\n",
      "295 , 保山市 , 2016-10-23 , 44 \n",
      "\n",
      "296 , 昭通市 , 2016-10-23 , 58 \n",
      "\n",
      "297 , 丽江市 , 2016-10-23 , 41 \n",
      "\n",
      "298 , 普洱市 , 2016-10-23 , 33 \n",
      "\n",
      "299 , 临沧市 , 2016-10-23 , 36 \n",
      "\n",
      "300 , 楚雄州 , 2016-10-23 , 42 \n",
      "\n",
      "301 , 红河州 , 2016-10-23 , 62 \n",
      "\n",
      "302 , 文山州 , 2016-10-23 , 52 \n",
      "\n",
      "303 , 西双版纳州 , 2016-10-23 , 39 \n",
      "\n",
      "304 , 大理州 , 2016-10-23 , 38 \n",
      "\n",
      "305 , 德宏州 , 2016-10-23 , 47 \n",
      "\n",
      "306 , 怒江州 , 2016-10-23 , 37 \n",
      "\n",
      "307 , 迪庆州 , 2016-10-23 , 48 \n",
      "\n",
      "308 , 拉萨市 , 2016-10-23 , 76 \n",
      "\n",
      "309 , 昌都地区 , 2016-10-23 , 77 \n",
      "\n",
      "310 , 山南地区 , 2016-10-23 , 57 \n",
      "\n",
      "311 , 日喀则地区 , 2016-10-23 , 79 \n",
      "\n",
      "312 , 那曲地区 , 2016-10-23 , 259 \n",
      "\n",
      "313 , 阿里地区 , 2016-10-23 , 37 \n",
      "\n",
      "314 , 林芝地区 , 2016-10-23 , 38 \n",
      "\n",
      "315 , 西安市 , 2016-10-23 , 39 \n",
      "\n",
      "316 , 铜川市 , 2016-10-23 , 43 \n",
      "\n",
      "317 , 宝鸡市 , 2016-10-23 , 37 \n",
      "\n",
      "318 , 咸阳市 , 2016-10-23 , 37 \n",
      "\n",
      "319 , 渭南市 , 2016-10-23 , 24 \n",
      "\n",
      "320 , 延安市 , 2016-10-23 , 38 \n",
      "\n",
      "321 , 汉中市 , 2016-10-23 , 38 \n",
      "\n",
      "322 , 榆林市 , 2016-10-23 , 49 \n",
      "\n",
      "323 , 安康市 , 2016-10-23 , 28 \n",
      "\n",
      "324 , 商洛市 , 2016-10-23 , 30 \n",
      "\n",
      "325 , 兰州市 , 2016-10-23 , 85 \n",
      "\n",
      "326 , 嘉峪关市 , 2016-10-23 , 77 \n",
      "\n",
      "327 , 金昌市 , 2016-10-23 , 65 \n",
      "\n",
      "328 , 白银市 , 2016-10-23 , 54 \n",
      "\n",
      "329 , 天水市 , 2016-10-23 , 38 \n",
      "\n",
      "330 , 武威市 , 2016-10-23 , 61 \n",
      "\n",
      "331 , 张掖市 , 2016-10-23 , 57 \n",
      "\n",
      "332 , 平凉市 , 2016-10-23 , 58 \n",
      "\n",
      "333 , 酒泉市 , 2016-10-23 , 74 \n",
      "\n",
      "334 , 庆阳市 , 2016-10-23 , 25 \n",
      "\n",
      "335 , 定西市 , 2016-10-23 , 43 \n",
      "\n",
      "336 , 陇南市 , 2016-10-23 , 48 \n",
      "\n",
      "337 , 临夏州 , 2016-10-23 , 98 \n",
      "\n",
      "338 , 甘南州 , 2016-10-23 , 115 \n",
      "\n",
      "339 , 西宁市 , 2016-10-23 , 76 \n",
      "\n",
      "340 , 海东地区 , 2016-10-23 , 92 \n",
      "\n",
      "341 , 海北州 , 2016-10-23 , 53 \n",
      "\n",
      "342 , 黄南州 , 2016-10-23 , 56 \n",
      "\n",
      "343 , 海南州 , 2016-10-23 , 51 \n",
      "\n",
      "344 , 果洛州 , 2016-10-23 , 68 \n",
      "\n",
      "345 , 玉树州 , 2016-10-23 , 44 \n",
      "\n",
      "346 , 海西州 , 2016-10-23 , 67 \n",
      "\n",
      "347 , 银川市 , 2016-10-23 , 79 \n",
      "\n",
      "348 , 石嘴山市 , 2016-10-23 , 58 \n",
      "\n",
      "349 , 吴忠市 , 2016-10-23 , 39 \n",
      "\n",
      "350 , 固原市 , 2016-10-23 , 29 \n",
      "\n",
      "351 , 中卫市 , 2016-10-23 , 50 \n",
      "\n",
      "352 , 乌鲁木齐市 , 2016-10-23 , 82 \n",
      "\n",
      "353 , 克拉玛依市 , 2016-10-23 , 45 \n",
      "\n",
      "354 , 吐鲁番地区 , 2016-10-23 , 107 \n",
      "\n",
      "355 , 哈密地区 , 2016-10-23 , 67 \n",
      "\n",
      "356 , 昌吉州 , 2016-10-23 , 79 \n",
      "\n",
      "357 , 博州 , 2016-10-23 , 67 \n",
      "\n",
      "358 , 库尔勒市 , 2016-10-23 , 131 \n",
      "\n",
      "359 , 阿克苏地区 , 2016-10-23 , 138 \n",
      "\n",
      "360 , 克州 , 2016-10-23 , 240 \n",
      "\n",
      "361 , 喀什地区 , 2016-10-23 , 279 \n",
      "\n",
      "362 , 和田地区 , 2016-10-23 , 295 \n",
      "\n",
      "363 , 伊犁哈萨克州 , 2016-10-23 , 43 \n",
      "\n",
      "364 , 塔城地区 , 2016-10-23 , 33 \n",
      "\n",
      "365 , 阿勒泰地区 , 2016-10-23 , 22 \n",
      "\n",
      "366 , 石河子市 , 2016-10-23 , 70 \n",
      "\n",
      "367 , 五家渠市 , 2016-10-23 , 55 \n",
      "\n"
     ]
    }
   ],
   "source": [
    "for pageNum in range(1, 14):\n",
    "    \n",
    "    content = urllib2.urlopen(urlBase + str(pageNum)).read() #获取网页的html文本\n",
    "    soup = BeautifulSoup(content) \n",
    "    table = soup.find(\"table\", { \"id\" : \"report1\" })\n",
    "    \n",
    "    for row in table.findAll(\"tr\"):\n",
    "        cells = row.findAll(\"td\")\n",
    "        rowNumber = cells[0].find(text = True)\n",
    "        \n",
    "        if rowNumber != None and rowNumber.isdigit():\n",
    "            cityName = cells[1].find(text = True)\n",
    "            date = cells[2].find(text = True)\n",
    "            AQI = cells[3].find(text = True)\n",
    "\n",
    "            print rowNumber,',', cityName,',', date, ',', AQI, '\\n'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/plain": [
       "'None'"
      ]
     },
     "execution_count": 13,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "str(None)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "ename": "IOError",
     "evalue": "[Errno 13] Permission denied: 'airquality.csv'",
     "output_type": "error",
     "traceback": [
      "\u001b[0;31m---------------------------------------------------------------------------\u001b[0m",
      "\u001b[0;31mIOError\u001b[0m                                   Traceback (most recent call last)",
      "\u001b[0;32m<ipython-input-14-550c006f5a53>\u001b[0m in \u001b[0;36m<module>\u001b[0;34m()\u001b[0m\n\u001b[1;32m     15\u001b[0m \u001b[1;33m\u001b[0m\u001b[0m\n\u001b[1;32m     16\u001b[0m             \u001b[0mline\u001b[0m \u001b[1;33m=\u001b[0m  \u001b[0mrowNumber\u001b[0m \u001b[1;33m+\u001b[0m\u001b[1;34m','\u001b[0m\u001b[1;33m+\u001b[0m \u001b[0mcityName\u001b[0m\u001b[1;33m+\u001b[0m\u001b[1;34m','\u001b[0m\u001b[1;33m+\u001b[0m\u001b[0mdate\u001b[0m\u001b[1;33m+\u001b[0m \u001b[1;34m','\u001b[0m\u001b[1;33m+\u001b[0m \u001b[0mstr\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mAQI\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m+\u001b[0m \u001b[1;34m'\\n'\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0;32m---> 17\u001b[0;31m             \u001b[1;32mwith\u001b[0m \u001b[0mopen\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34m'airquality.csv'\u001b[0m\u001b[1;33m,\u001b[0m \u001b[1;34m'a'\u001b[0m\u001b[1;33m)\u001b[0m \u001b[1;32mas\u001b[0m \u001b[0mp\u001b[0m\u001b[1;33m:\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n\u001b[0m\u001b[1;32m     18\u001b[0m                 \u001b[0mp\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mwrite\u001b[0m\u001b[1;33m(\u001b[0m\u001b[0mline\u001b[0m\u001b[1;33m.\u001b[0m\u001b[0mencode\u001b[0m\u001b[1;33m(\u001b[0m\u001b[1;34m'utf-8'\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m)\u001b[0m\u001b[1;33m\u001b[0m\u001b[0m\n",
      "\u001b[0;31mIOError\u001b[0m: [Errno 13] Permission denied: 'airquality.csv'"
     ]
    }
   ],
   "source": [
    "for pageNum in range(1, 14):\n",
    "    \n",
    "    content = urllib2.urlopen(urlBase + str(pageNum)).read() #获取网页的html文本\n",
    "    soup = BeautifulSoup(content) \n",
    "    table = soup.find(\"table\", { \"id\" : \"report1\" })\n",
    "    \n",
    "    for row in table.findAll(\"tr\"):\n",
    "        cells = row.findAll(\"td\")\n",
    "        rowNumber = cells[0].find(text = True)\n",
    "        \n",
    "        if rowNumber != None and rowNumber.isdigit():\n",
    "            cityName = cells[1].find(text = True)\n",
    "            date = cells[2].find(text = True)\n",
    "            AQI = cells[3].find(text = True)\n",
    "\n",
    "            line =  rowNumber +','+ cityName+','+date+ ','+ str(AQI)+ '\\n'            \n",
    "            with open('airquality.csv', 'a') as p:\n",
    "                p.write(line.encode('utf-8'))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python [conda root]",
   "language": "python",
   "name": "conda-root-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 2
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython2",
   "version": "2.7.12"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
